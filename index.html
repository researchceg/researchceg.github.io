<!DOCTYPE html>
<html>
<body onload="getLocation()">

<p>Latitude and Longititude</p>


<p id="demo"></p>
<div style="width:0px;overflow:hidden;height:0px;"> <!-- if you use display:nonw here it doesn't work-->
    <gcse:search></gcse:search>
</div>
<form id="searchbox_005750558669048217645:0x2mnm__wbm" action="">
    <input value="005750558669048217645:0x2mnm__wbm" name="cx" type="hidden"/>
    <input value="FORID:11" name="cof" type="hidden"/>
    <input id="q" style="" name="q" size="75" type="text"/>
    <button class="btn" id="searchA">Search</button>
</form>
<div id="lastOutputPro" style="display:block"></div>




<script src="https://maps.googleapis.com/maps/api/js?v=3.exp&sensor=false&callback=initialize11"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>

<!--MODEL-->
<script>
(function() {
  var cx = '005750558669048217645:0x2mnm__wbm';
  var gcse = document.createElement('script');
  gcse.type = 'text/javascript';
  gcse.async = true;
  gcse.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') +
    '//www.google.com/cse/cse.js?cx=' + cx;
  var s = document.getElementsByTagName('script')[0];
  s.parentNode.insertBefore(gcse, s);
}());

var geocoder;
function initialize11() {
  geocoder = new google.maps.Geocoder();
}

var x = document.getElementById("demo");

function getLocation() {
    if (navigator.geolocation) {
        navigator.geolocation.getCurrentPosition(showPosition);
    } else { 
        
    }
}


function showPosition(position) {
      var lat = position.coords.latitude;
  var lng = position.coords.longitude;
  var latlng = new google.maps.LatLng(lat, lng);
  geocoder.geocode({'latLng': latlng}, function(results, status) {
    if (status == google.maps.GeocoderStatus.OK) {
      if (results[1]) {
        x.innerHTML="best offers "+results[1].formatted_address.split(",")[1];
      } else {
        alert('No results found');
      }
    } else {
      alert('Geocoder failed due to: ' + status);
    }
  });

}

setTimeout(function(){
if($.cookie('my_cookie_name')==null){

  $('#q').val(x.innerHTML);
  setTimeout(function() {
    $('#searchA').trigger('click');
    var date = new Date();
    var minutes = 2;
    date.setTime(date.getTime() + (minutes * 60 * 1000));
    $.cookie('my_cookie_name', 'value',{expires:date}); 
      z=$("div.gsc-richsnippet-showsnippet-label");
      z.each(function  (index) {
        alert("hi");
         z.trigger('click');
        $("#lastOutputPro").append($(this).text());
      });
  },10000);
   
}
else{
  z=$("span.gsc-richsnippet-showsnippet-label");
      z.each(function  (index) {
         z.trigger('click');
        $("#lastOutputPro").append($('div.gsc-richsnippet-individual-snippet-key').text());
      });
}
},6000);
</script>


<script src="jq.cookie.js"></script> 

</body>
	</html>